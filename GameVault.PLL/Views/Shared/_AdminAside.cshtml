@inject SignInManager<GameVault.DAL.Entities.User> SignInManager
@inject UserManager<GameVault.DAL.Entities.User> UserManager

@{
	var currentUser = SignInManager.IsSignedIn(User) ? await UserManager.GetUserAsync(User) : null;
}
<!-- Sidebar -->
<div class="sidebar" data-background-color="dark">
	<div class="sidebar-logo">
		<!-- Logo Header -->
		<div class="logo-header" data-background-color="blue">
			<a asp-action="Index" asp-controller="Home" class="logo">
				GameVault
			</a>
			<div class="nav-toggle">
				<button class="btn btn-toggle toggle-sidebar">
					<i class="gg-menu-right"></i>
				</button>
				<button class="btn btn-toggle sidenav-toggler">
					<i class="gg-menu-left"></i>
				</button>
			</div>
			<button class="topbar-toggler more">
				<i class="gg-more-vertical-alt"></i>
			</button>
		</div>
		<!-- End Logo Header -->
	</div>
	<div class="sidebar-wrapper scrollbar scrollbar-inner">
		<div class="sidebar-content">
			<ul class="nav nav-secondary">
				<li class="nav-item active">
					<a data-bs-toggle="collapse"
					   href="#dashboard"
					   class="collapsed"
					   aria-expanded="false">
						<i class="fas fa-home"></i>
						<p>Home</p>
						<span class="caret"></span>
					</a>
					<div class="collapse" id="dashboard">
						<ul class="nav nav-collapse">
							<li>
								<a asp-controller="Home" asp-action="Index">
									<span class="sub-item">Home</span>
								</a>
							</li>
						</ul>
					</div>
				</li>
				<li class="nav-section">
					<span class="sidebar-mini-icon">
						<i class="fa fa-ellipsis-h"></i>
					</span>
					<h4 class="text-section">Pages</h4>
				</li>
				@if (currentUser != null)
				{
					<li class="nav-item">
						<a data-bs-toggle="collapse" href="#base">
							<i class="fas fa-layer-group"></i>
							<p>Account</p>
							<span class="caret"></span>
						</a>
						<div class="collapse" id="base">
							<ul class="nav nav-collapse">
								<li>
									<a asp-action="Logout" asp-controller="Account">
										<span class="sub-item">Log out</span>
									</a>
								</li>
								<li>
									<a asp-action="ChangePassword" asp-controller="Account">
										<span class="sub-item">ChangePassword</span>
									</a>
								</li>
							</ul>
						</div>
					</li>
					<li class="nav-item">
						<a data-bs-toggle="collapse" href="#sidebarLayouts">
							<i class="fas fa-th-list"></i>
							<p> Me </p>
							<span class="caret"></span>
						</a>
						<div class="collapse" id="sidebarLayouts">
							<ul class="nav nav-collapse">
								<li>
									<a asp-action="MyProfile" asp-controller="User">
										<span class="sub-item">My profile</span>
									</a>
								</li>
								<li>
									<a asp-action="UpdateProfile" asp-controller="User">
										<span class="sub-item">Update Profile</span>
									</a>
								</li>
								<li>
									<a asp-action="UserLibrary" asp-controller="User" asp-route-id="@currentUser.Id">
										<span class="sub-item">My Library</span>
									</a>
								</li>
							</ul>
						</div>
					</li>
					@if (currentUser != null && UserManager.IsInRoleAsync(currentUser, "Admin").Result)
					{
						<li class="nav-item">
							<a data-bs-toggle="collapse" href="#rolesMenu">
								<i class="fas fa-user-shield"></i>
								<p>Roles</p>
								<span class="caret"></span>
							</a>
							<div class="collapse" id="rolesMenu">
								<ul class="nav nav-collapse">
									<li>
										<a asp-action="RolesList" asp-controller="Role">
											<span class="sub-item">Roles List</span>
										</a>
									</li>
									<li>
										<a asp-action="CreateRole" asp-controller="Role">
											<span class="sub-item">Create Role</span>
										</a>
									</li>
								</ul>
							</div>
						</li>

						<li class="nav-item">
							<a data-bs-toggle="collapse" href="#usersMenu">
								<i class="fas fa-users"></i>
								<p>User Manager</p>
								<span class="caret"></span>
							</a>
							<div class="collapse" id="usersMenu">
								<ul class="nav nav-collapse">
									<li>
										<a asp-action="Index" asp-controller="User">
											<span class="sub-item">Users List</span>
										</a>
									</li>
									<li>
										<a asp-action="AllAdmins" asp-controller="User">
											<span class="sub-item">Admins List</span>
										</a>
									</li>
								</ul>
							</div>
						</li>

						<li class="nav-item">
							<a data-bs-toggle="collapse" href="#gamesMenu">
								<i class="fas fa-gamepad"></i>
								<p>Games</p>
								<span class="caret"></span>
							</a>
							<div class="collapse" id="gamesMenu">
								<ul class="nav nav-collapse">
									<li>
										<a asp-action="Index" asp-controller="Game">
											<span class="sub-item">All Games</span>
										</a>
									</li>
									<li>
										<a asp-action="Add" asp-controller="Game">
											<span class="sub-item">Add Game</span>
										</a>
									</li>
								</ul>
							</div>
						</li>

						<li class="nav-item">
							<a data-bs-toggle="collapse" href="#companiesMenu">
								<i class="fas fa-building"></i>
								<p>Companies</p>
								<span class="caret"></span>
							</a>
							<div class="collapse" id="companiesMenu">
								<ul class="nav nav-collapse">
									<li>
										<a asp-action="Index" asp-controller="Company">
											<span class="sub-item">All Companies</span>
										</a>
									</li>
									<li>
										<a asp-action="Add" asp-controller="Company">
											<span class="sub-item">Add Company</span>
										</a>
									</li>
								</ul>
							</div>
						</li>

						<li class="nav-item">
							<a data-bs-toggle="collapse" href="#categoriesMenu">
								<i class="fas fa-tags"></i>
								<p>Categories</p>
								<span class="caret"></span>
							</a>
							<div class="collapse" id="categoriesMenu">
								<ul class="nav nav-collapse">
									<li>
										<a asp-action="Index" asp-controller="Category">
											<span class="sub-item">All Categories</span>
										</a>
									</li>
									<li>
										<a asp-action="Create" asp-controller="Category">
											<span class="sub-item">Add Category</span>
										</a>
									</li>
								</ul>
							</div>
						</li>
					}
				}
			</ul>
		</div>
	</div>
</div>
<!-- End Sidebar -->
